<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.l13z.infrastructure.persistent.dao.IStrategyRuleDao">
  <resultMap id="dataMap" type="cn.l13z.infrastructure.persistent.po.StrategyRule">
    <id column="id" property="id"/>
    <result column="strategy_id" property="strategyId"/>
    <result column="award_id" property="awardId"/>
    <result column="rule_type" property="ruleType"/>
    <result column="rule_model" property="ruleModel"/>
    <result column="rule_value" property="ruleValue"/>
    <result column="rule_desc" property="ruleDesc"/>
    <result column="create_time" property="createTime"/>
    <result column="update_time" property="updateTime"/>
  </resultMap>

  <select id="queryStrategyRuleList" resultMap="dataMap">
    select *
    from strategy_rule
    limit 10;
  </select>

  <select id="queryStrategyRule" resultType="cn.l13z.infrastructure.persistent.po.StrategyRule" resultMap="dataMap">
    select strategy_id, award_id, rule_type, rule_model, rule_value, rule_desc
    from strategy_rule
    where strategy_id = #{strategyId} and rule_model = #{ruleModel}
  </select>

  <select id="queryStrategyRuleValue" parameterType="cn.l13z.infrastructure.persistent.po.StrategyRule" resultType="java.lang.String">
    select rule_value from strategy_rule
    where strategy_id = #{strategyId} and rule_model = #{ruleModel}
    <if test="awardId != null">
      and award_id = #{awardId}
    </if>
  </select>


  <!--  <update id="updateOrderStatusByUserId" parameterType="java.lang.String">-->
  <!--    UPDATE user_order SET order_status = 1 WHERE user_id = #{userId}-->
  <!--  </update>-->

  <!--  <select id="selectByUserId" parameterType="java.lang.String" resultMap="dataMap">-->
  <!--    SELECT id, user_name, user_id, user_mobile, sku, sku_name,-->
  <!--    order_id, quantity, unit_price, discount_amount, tax,-->
  <!--    total_amount, order_date, order_status, is_delete, uuid,-->
  <!--    ipv4, ipv6, ext_data, update_time, create_time-->
  <!--    FROM user_order-->
  <!--    WHERE user_id = #{userId}-->
  <!--  </select>-->
</mapper>
